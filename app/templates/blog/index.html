{%- from '_helpers.html' import render_pagination -%}
{% extends 'base.html' %}

{% block title %}{{title}}{% endblock %}
{%- block styles %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/markdown.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/codehilite.css') }}">
{%- endblock %}
{% block content %}
    {% if posts|length > 0 %}
        {% for post in posts %}
            <div class="post markdown-body">
            <h2><a href="{{ url_for('blog.get_post', pid=post.id) }}">{{ post.title }}</a></h2>
            <p>Created at: {{ post.created_at }} by {{ post.author.name }}</p>
            <p>{{ post.html|safe }}</p>
            <form action="{{ url_for('blog.delete', pid=post.id) }}" method="POST">
                <input type="hidden" name="_method" value="DELETE" />
                <input type="submit" value="Delete"/>
            </form>
            <a href="{{- url_for('blog.edit_post', pid=post.id) -}}">Edit</a>
            </div>
        {% endfor %}
        {{- render_pagination(pagination) -}}
    {% else %}
        <p>No post</p>
    {% endif %}
{% endblock %}